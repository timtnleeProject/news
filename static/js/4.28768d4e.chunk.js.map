{"version":3,"sources":["helper/store.js","components/NewsList/index.js","components/NewsList/news.module.css","helper/api.js","helper/data.js","../node_modules/classnames/index.js","components/Modal/modal.module.css","components/Setting/setting.module.css","routes/Home/home.module.css","components/Modal/index.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Setting/home.js","routes/Home/SettingBar.js","routes/Home/index.js"],"names":["globalStore","initialStore","this","key","value","expired","Error","str","JSON","stringify","localStorage","setItem","getItem","date","parsed","parse","Date","now","getTime","removeItem","clear","setting","country","category","params","q","News","props","info","source","name","author","push","publishedAt","toLocaleString","className","styles","item","onClick","window","open","url","image","style","backgroundImage","content","title","join","description","NewsList","news","list","map","i","urlToImage","module","exports","CONFIG","api","origin","token","instance","axios","create","baseURL","timeout","headers","interceptors","response","use","data","status","Promise","reject","getTopHeadlines","store","get","localHeadlines","resolve","then","res","milisec","headlines","articles","save","anHour","getEverything","ob1","ob2","localParams","Object","keys","some","localEverything","fetchEverything","hasOwn","hasOwnProperty","classNames","classes","arguments","length","arg","argType","Array","isArray","inner","apply","call","default","Modal","modalBody","React","createRef","useEffect","current","focus","modalClass","classnames","modal","show","ReactDom","createPortal","tabIndex","ref","onBlur","onClose","children","document","body","_slicedToArray","arr","Symbol","iterator","prototype","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","TypeError","countries","split","categories","Tag","tagClass","tag","wide","active","onTagSelect","Setting","useState","setCountry","setCategory","handleTagSelect","type","remove","section","c","bind","Home","_isMounted","state","modalOpen","setState","stateAfter","localSetting","toggleModal","Loading","Component"],"mappings":"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","file":"static/js/4.28768d4e.chunk.js","sourcesContent":["const isExpired = (date) => {\n  if (!date) return false\n  return Date.now() > new Date(date).getTime()\n}\n\nexport class Store {\n  constructor (initialStore) {\n    this.initialStore = initialStore\n  }\n  save ({ key, value, expired }) {\n    if (!value || typeof value !== 'object') throw new Error('value must be an object')\n    const str = JSON.stringify({\n      value,\n      expired\n    })\n    localStorage.setItem(key, str)\n  }\n  get (key) {\n    const str = localStorage.getItem(key)\n    if (!str) return this.initialStore[key] || null\n    const parsed = JSON.parse(str)\n    if (isExpired(parsed.expired)) {\n      return this.initialStore[key] || null\n    } else {\n      return parsed.value\n    }\n  }\n  remove (key) {\n    localStorage.removeItem(key)\n  }\n  clear () {\n    localStorage.clear()\n  }\n}\n\nconst globalStore = new Store({\n  setting: {\n    country: 'tw',\n    category: 'general'\n  },\n  params: {\n    q: 'Google'\n  }\n})\n// developing\n// store.clear()\nexport default globalStore\n","import React from 'react';\nimport styles from './news.module.css'\n\nfunction News (props) {\n  const openLink = () => {\n    window.open(props.url, '_blank')\n  }\n  const info = [props.source.name]\n  if (props.author) info.push(props.author)\n  const date = props.publishedAt\n    ? new Date(props.publishedAt).toLocaleString()\n    : null\n  return (\n    <div\n      className={styles.item}\n      onClick={openLink}\n    >\n      { props.image\n        ? (\n          <div\n            className={styles.image}\n            style={{backgroundImage: `url(${props.image})`}}\n          ></div>\n        )\n        : null\n      }\n      <div className={styles.content}>\n        <div className={styles.title}>{props.title}</div>\n        <div className={styles.info}>\n          <span>{info.join('/')}</span>\n          <span>{date}</span>\n        </div>\n        <div className={styles.description}>{props.description}</div>\n      </div>\n    </div>\n  )\n}\n\nexport default function NewsList (props) {\n  const news = props.list.map((item, i) => (\n    <News\n      title={item.title}\n      description={item.description}\n      url={item.url}\n      source={item.source}\n      author={item.author}\n      publishedAt={item.publishedAt}\n      image={item.urlToImage}\n      key={i}\n    />\n  ))\n  return (\n    <div>\n      {news}\n    </div>\n  )\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"news_item__2akXV\",\"content\":\"news_content__3kxe-\",\"title\":\"news_title__3WJqZ\",\"info\":\"news_info__2Ny5e\",\"description\":\"news_description__2LbzD\",\"image\":\"news_image__8z6Aw\"};","import axios from 'axios'\nimport CONFIG from '../config'\nconst { origin, token } = CONFIG.api\n\nconst instance = axios.create({\n  baseURL: origin,\n  timeout: 3000,\n  headers: {\n    'X-Api-Key': token\n  }\n})\ninstance.interceptors.response.use(response => {\n  if (response.data && response.data.status === 'ok') return response.data\n  else return Promise.reject(response)\n})\n\nexport function fetchHeadlines (params) {\n  return instance.get('/top-headlines', {\n    params\n  })\n}\n\nexport function fetchSources ({ country }) {\n  return instance.get('/sources')\n}\n\nexport function fetchEverything ({ q }) {\n  return instance.get('/everything', {\n    params: {\n      q\n    }\n  })\n}","import store from './store';\nimport { fetchHeadlines, fetchEverything } from './api'\n\nconst anHour = 60 * 60 * 1000\nconst dateAfter = (milisec) => {\n  return new Date(Date.now() + milisec)\n}\n\nexport function resetTopHeadlines () {\n  store.remove('headlines')\n}\n\nexport function getTopHeadlines () {\n  const setting = store.get('setting')\n  const { country, category } = setting\n  const localHeadlines = store.get('headlines')\n  if (localHeadlines) return Promise.resolve(localHeadlines)\n  return fetchHeadlines({ country, category }).then(res => {\n    const headlines = res.articles\n    store.save({\n      key: 'headlines',\n      value: headlines,\n      expired: dateAfter(anHour / 2)\n    })\n    return headlines\n  })\n}\n\nconst isSame = (ob1, ob2) => {\n  const keys = Object.keys({...ob1, ob2})\n  const inconsist = keys.some(key => {\n    return ob1[key] !== ob2[key]\n  })\n  return !inconsist\n}\nexport function getEverything (params) {\n  const localParams = store.get('params')\n  if (isSame(localParams, params)) {\n    const localEverything = store.get('everything')\n    if (localEverything) return Promise.resolve(localEverything)\n  }\n  return fetchEverything(params).then(res => {\n    const articles = res.articles\n    store.save({\n      key: 'everything',\n      value: articles\n    })\n    store.save({\n      key: 'params',\n      value: params\n    })\n    return articles\n  })\n}","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__3OAHy\",\"show\":\"modal_show__Kb8-4\",\"modal__body\":\"modal_modal__body__2ZCml\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"setting_section__3GSiB\",\"title\":\"setting_title__3dhEO\",\"tags-wrap\":\"setting_tags-wrap__3dFu3\",\"tag\":\"setting_tag__2qHxy\",\"active\":\"setting_active__2ioJ1\",\"tag--wide\":\"setting_tag--wide__2OQM1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"setting\":\"home_setting__38n6U\",\"setting__row\":\"home_setting__row__3qwpn\"};","import React, { useEffect } from 'react'\nimport ReactDom from 'react-dom'\nimport classnames from 'classnames'\nimport styles from './modal.module.css'\n\nexport default function Modal (props) {\n  const modalBody = React.createRef()\n  useEffect(() => {\n    if (props.open) {\n      modalBody.current.focus()\n    }\n  });\n\n  const handleBlur = () => {\n    props.onClose()\n  }\n  const modalClass = classnames([styles.modal, { [styles.show]: props.open }])\n  return ReactDom.createPortal(\n    (<div className={modalClass}>\n      <div\n        className={styles['modal__body']}\n        tabIndex=\"1\"\n        ref={modalBody}\n        onBlur={handleBlur}\n      >\n        {props.children}\n      </div>\n    </div>),\n    document.body\n  )\n}\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React, { useState } from 'react'\nimport styles from './setting.module.css'\nimport store from '../../helper/store'\nimport classnames from 'classnames'\n\nconst countryStr = 'ae ar at au be bg br ca ch cn co cu cz de eg fr gb gr hk hu id ie il in it jp kr lt lv ma mx my ng nl no nz ph pl pt ro rs ru sa se sg si sk th tr tw ua us ve za'\nconst countries = countryStr.split(' ')\nconst categories = ['business', 'entertainment', 'general', 'health', 'science', 'sports', 'technology']\n\nconst Tag = props => {\n  const tagClass = classnames(styles.tag, {\n    [styles['tag--wide']]: props.wide,\n    [styles.active]: props.active\n  })\n  return(\n    <div\n      className={tagClass}\n      onClick={props.onTagSelect}\n    >\n      {props.value}\n    </div>\n  )\n}\n\nexport default function Setting () {\n  const setting = store.get('setting')\n  const [country, setCountry] = useState(setting.country);\n  const [category, setCategory] = useState(setting.category);\n  const handleTagSelect = (type, value) => {\n    const setting = store.get('setting')\n    if (setting[type] === value) return\n    store.remove('headlines')\n    store.save({\n      key: 'setting',\n      value: {\n        ...setting,\n        [type]: value\n      }\n    })\n    if (type === 'country') setCountry(value)\n    else setCategory(value)\n  }\n  return (\n    <div>\n      <div className={styles.section}>\n        <div className={styles.title}>國家</div>\n        <div className={styles['tags-wrap']}>\n          {\n            countries.map(c => {\n              const active = country === c\n              return (\n                <Tag\n                  value={c}\n                  active={active}\n                  key={c}\n                  onTagSelect={handleTagSelect.bind(this, 'country', c)}\n                ></Tag>\n              )}\n            )\n          }\n        </div>\n      </div>\n      <div className={styles.section}>\n        <div className={styles.title}>類別</div>\n        <div className={styles['tags-wrap']}>\n          {\n            categories.map(c => {\n              const active = category === c\n              return (\n                <Tag\n                  value={c}\n                  active={active}\n                  key={c}\n                  wide\n                  onTagSelect={handleTagSelect.bind(this, 'category', c)}\n                ></Tag>\n              )}\n            )\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport styles from './home.module.css';\n\nexport default function Setting (props) {\n  const { country, category } = props.setting\n  return (\n    <div className={styles.setting} onClick={props.onClick}>\n      <div className={styles['setting__row']}>\n        <label>國家</label>\n        <div>{country}</div>\n      </div>\n      <div className={styles['setting__row']}>\n        <label>類別</label>\n        <div>{category}</div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport NewsList from '../../components/NewsList'\nimport Modal from '../../components/Modal'\nimport Loading from '../../components/Loading'\nimport Setting from '../../components/Setting/home'\nimport SettingBar from './SettingBar'\nimport { getTopHeadlines } from '../../helper/data'\nimport store from '../../helper/store'\n\nexport default class Home extends React.Component {\n  _isMounted = false\n  constructor (props) {\n    super(props)\n    const setting = store.get('setting')\n    this.state = {\n      list: [],\n      modalOpen: false,\n      setting\n    }\n  }\n  componentDidMount () {\n    this._isMounted = true\n    this.getTopHeadlines()\n  }\n  componentWillUnmount () {\n    this._isMounted = false\n  }\n\n  getTopHeadlines () {\n    getTopHeadlines()\n      .then(news => {\n        if (this._isMounted) {\n          this.setState({\n            list: news\n          })\n        }\n      })\n  }\n\n  toggleModal (status) {\n    const stateAfter = { modalOpen: status }\n    if (!status) {\n      const { category, country } = this.state.setting\n      const localSetting = store.get('setting')\n      if (category !== localSetting.category || country !== localSetting.country) {\n        stateAfter.setting = localSetting\n        stateAfter.list = []\n        this.getTopHeadlines()\n      }\n    }\n    this.setState(stateAfter)\n  }\n  render () {\n    const { category, country } = this.state.setting\n    return (\n      <div>\n        <SettingBar\n          onClick={this.toggleModal.bind(this, true)}\n          setting={{ category, country }}\n        />\n        {\n          this.state.list.length === 0\n            ? <Loading/>\n            : <NewsList list={this.state.list}/>\n        }\n        <Modal\n          open={this.state.modalOpen}\n          onClose={this.toggleModal.bind(this, false)}\n        >\n          <Setting></Setting>\n        </Modal>\n      </div>\n    )\n  }\n}"],"sourceRoot":""}