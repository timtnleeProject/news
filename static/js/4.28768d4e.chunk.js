/*! For license information please see 4.28768d4e.chunk.js.LICENSE.txt */
(this["webpackJsonploc-news"]=this["webpackJsonploc-news"]||[]).push([[4],{35:function(e,t,a){"use strict";var n=a(36),r=a(37),i=new(function(){function e(t){Object(n.a)(this,e),this.initialStore=t}return Object(r.a)(e,[{key:"save",value:function(e){var t=e.key,a=e.value,n=e.expired;if(!a||"object"!==typeof a)throw new Error("value must be an object");var r=JSON.stringify({value:a,expired:n});localStorage.setItem(t,r)}},{key:"get",value:function(e){var t=localStorage.getItem(e);if(!t)return this.initialStore[e]||null;var a,n=JSON.parse(t);return(a=n.expired)&&Date.now()>new Date(a).getTime()?this.initialStore[e]||null:n.value}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),e}())({setting:{country:"tw",category:"general"},params:{q:"Google"}});t.a=i},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),i=a(39),o=a.n(i);function l(e){var t=[e.source.name];e.author&&t.push(e.author);var a=e.publishedAt?new Date(e.publishedAt).toLocaleString():null;return r.a.createElement("div",{className:o.a.item,onClick:function(){window.open(e.url,"_blank")}},e.image?r.a.createElement("div",{className:o.a.image,style:{backgroundImage:"url(".concat(e.image,")")}}):null,r.a.createElement("div",{className:o.a.content},r.a.createElement("div",{className:o.a.title},e.title),r.a.createElement("div",{className:o.a.info},r.a.createElement("span",null,t.join("/")),r.a.createElement("span",null,a)),r.a.createElement("div",{className:o.a.description},e.description)))}function s(e){var t=e.list.map((function(e,t){return r.a.createElement(l,{title:e.title,description:e.description,url:e.url,source:e.source,author:e.author,publishedAt:e.publishedAt,image:e.urlToImage,key:t})}));return r.a.createElement("div",null,t)}},39:function(e,t,a){e.exports={item:"news_item__2akXV",content:"news_content__3kxe-",title:"news_title__3WJqZ",info:"news_info__2Ny5e",description:"news_description__2LbzD",image:"news_image__8z6Aw"}},42:function(e,t,a){"use strict";var n=a(41),r=a(35),i=a(46),o=a.n(i),l=a(13).a.api,s=l.origin,c=l.token,u=o.a.create({baseURL:s,timeout:3e3,headers:{"X-Api-Key":c}});u.interceptors.response.use((function(e){return e.data&&"ok"===e.data.status?e.data:Promise.reject(e)})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return v}));function m(){var e,t=r.a.get("setting"),a=t.country,n=t.category,i=r.a.get("headlines");return i?Promise.resolve(i):(e={country:a,category:n},u.get("/top-headlines",{params:e})).then((function(e){var t,a=e.articles;return r.a.save({key:"headlines",value:a,expired:(t=18e5,new Date(Date.now()+t))}),a}))}function v(e){var t,a,i=r.a.get("params");if(t=i,a=e,!Object.keys(Object(n.a)({},t,{ob2:a})).some((function(e){return t[e]!==a[e]}))){var o=r.a.get("everything");if(o)return Promise.resolve(o)}return function(e){var t=e.q;return u.get("/everything",{params:{q:t}})}(e).then((function(t){var a=t.articles;return r.a.save({key:"everything",value:a}),r.a.save({key:"params",value:e}),a}))}},45:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var o=r.apply(null,n);o&&e.push(o)}else if("object"===i)for(var l in n)a.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},57:function(e,t,a){e.exports={modal:"modal_modal__3OAHy",show:"modal_show__Kb8-4",modal__body:"modal_modal__body__2ZCml"}},58:function(e,t,a){e.exports={section:"setting_section__3GSiB",title:"setting_title__3dhEO","tags-wrap":"setting_tags-wrap__3dFu3",tag:"setting_tag__2qHxy",active:"setting_active__2ioJ1","tag--wide":"setting_tag--wide__2OQM1"}},59:function(e,t,a){e.exports={setting:"home_setting__38n6U",setting__row:"home_setting__row__3qwpn"}},79:function(e,t,a){"use strict";a.r(t);var n=a(36),r=a(37),i=a(56),o=a(44),l=a(55),s=a(0),c=a.n(s),u=a(38),m=a(40),v=a(16),g=a.n(v),d=a(45),f=a.n(d),p=a(57),h=a.n(p);function y(e){var t=c.a.createRef();Object(s.useEffect)((function(){e.open&&t.current.focus()}));var a=f()([h.a.modal,Object(m.a)({},h.a.show,e.open)]);return g.a.createPortal(c.a.createElement("div",{className:a},c.a.createElement("div",{className:h.a.modal__body,tabIndex:"1",ref:t,onBlur:function(){e.onClose()}},e.children)),document.body)}var _=a(14),b=a(41);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var E=a(58),k=a.n(E),O=a(35),j="ae ar at au be bg br ca ch cn co cu cz de eg fr gb gr hk hu id ie il in it jp kr lt lv ma mx my ng nl no nz ph pl pt ro rs ru sa se sg si sk th tr tw ua us ve za".split(" "),N=["business","entertainment","general","health","science","sports","technology"],S=function(e){var t,a=f()(k.a.tag,(t={},Object(m.a)(t,k.a["tag--wide"],e.wide),Object(m.a)(t,k.a.active,e.active),t));return c.a.createElement("div",{className:a,onClick:e.onTagSelect},e.value)};function x(){var e=this,t=O.a.get("setting"),a=w(Object(s.useState)(t.country),2),n=a[0],r=a[1],i=w(Object(s.useState)(t.category),2),o=i[0],l=i[1],u=function(e,t){var a=O.a.get("setting");a[e]!==t&&(O.a.remove("headlines"),O.a.save({key:"setting",value:Object(b.a)({},a,Object(m.a)({},e,t))}),"country"===e?r(t):l(t))};return c.a.createElement("div",null,c.a.createElement("div",{className:k.a.section},c.a.createElement("div",{className:k.a.title},"\u570b\u5bb6"),c.a.createElement("div",{className:k.a["tags-wrap"]},j.map((function(t){var a=n===t;return c.a.createElement(S,{value:t,active:a,key:t,onTagSelect:u.bind(e,"country",t)})})))),c.a.createElement("div",{className:k.a.section},c.a.createElement("div",{className:k.a.title},"\u985e\u5225"),c.a.createElement("div",{className:k.a["tags-wrap"]},N.map((function(t){var a=o===t;return c.a.createElement(S,{value:t,active:a,key:t,wide:!0,onTagSelect:u.bind(e,"category",t)})})))))}var A=a(59),C=a.n(A);function M(e){var t=e.setting,a=t.country,n=t.category;return c.a.createElement("div",{className:C.a.setting,onClick:e.onClick},c.a.createElement("div",{className:C.a.setting__row},c.a.createElement("label",null,"\u570b\u5bb6"),c.a.createElement("div",null,a)),c.a.createElement("div",{className:C.a.setting__row},c.a.createElement("label",null,"\u985e\u5225"),c.a.createElement("div",null,n)))}var T=a(42);a.d(t,"default",(function(){return D}));var D=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1;var r=O.a.get("setting");return a.state={list:[],modalOpen:!1,setting:r},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getTopHeadlines()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getTopHeadlines",value:function(){var e=this;Object(T.b)().then((function(t){e._isMounted&&e.setState({list:t})}))}},{key:"toggleModal",value:function(e){var t={modalOpen:e};if(!e){var a=this.state.setting,n=a.category,r=a.country,i=O.a.get("setting");n===i.category&&r===i.country||(t.setting=i,t.list=[],this.getTopHeadlines())}this.setState(t)}},{key:"render",value:function(){var e=this.state.setting,t=e.category,a=e.country;return c.a.createElement("div",null,c.a.createElement(M,{onClick:this.toggleModal.bind(this,!0),setting:{category:t,country:a}}),0===this.state.list.length?c.a.createElement(_.a,null):c.a.createElement(u.a,{list:this.state.list}),c.a.createElement(y,{open:this.state.modalOpen,onClose:this.toggleModal.bind(this,!1)},c.a.createElement(x,null)))}}]),t}(c.a.Component)}}]);
//# sourceMappingURL=4.28768d4e.chunk.js.map