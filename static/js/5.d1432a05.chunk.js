(this["webpackJsonploc-news"]=this["webpackJsonploc-news"]||[]).push([[5],{118:function(e,t,a){e.exports={section:"setting_section__2OMJQ",title:"setting_title__3Lyb2","tags-wrap":"setting_tags-wrap__2--RY",tag:"setting_tag__110aS"}},173:function(e,t,a){"use strict";a.r(t);var n=a(75),r=a(76),i=a(110),s=a(91),l=a(111),c=a(0),o=a.n(c),u=a(78),m=a(27),g=a(92),v=a(80),d=a(142),p=a(118),h=a.n(p),f=a(73),y=a(174),b="af ar bg bn ca cn cs cy da de el en es et fa fi fr gu he hi hr hu id it ja kn ko lt lv mk ml mr ne nl no pa pl pt ro ru sk sl so sq sv sw ta te th tl tr tw uk ur vi".split(" "),k=["news","sport","tech","world","finance","politics","business","economics","entertainment"];function E(){var e=this,t=f.a.get("setting"),a=Object(c.useState)(t.country),n=Object(d.a)(a,2),r=n[0],i=n[1],s=Object(c.useState)(t.category),l=Object(d.a)(s,2),u=l[0],m=l[1],p=function(e,t){var a=f.a.get("setting");a[e]!==t&&(f.a.remove("headlines"),f.a.save({key:"setting",value:Object(v.a)({},a,Object(g.a)({},e,t))}),"country"===e?i(t):m(t))};return o.a.createElement("div",null,o.a.createElement("div",{className:h.a.section},o.a.createElement("div",{className:h.a.title},"language"),o.a.createElement("div",{className:h.a["tags-wrap"]},b.map((function(t){var a=r===t;return o.a.createElement(y.a,{className:h.a.tag,onClick:p.bind(e,"country",t),label:t,key:t,color:a?"primary":"default"})})))),o.a.createElement("div",{className:h.a.section},o.a.createElement("div",{className:h.a.title},"category"),o.a.createElement("div",{className:h.a["tags-wrap"]},k.map((function(t){var a=u===t;return o.a.createElement(y.a,{className:h.a.tag,onClick:p.bind(e,"category",t),label:t,key:t,color:a?"primary":"default"})})))))}var _=a(163),w=a(164),O=a(165),j=a(166);function N(e){var t=e.setting,a=t.country,n=t.category;return o.a.createElement(_.a,{className:"no-tab",style:{maxWidth:"300px",cursor:"pointer",marginBottom:"10px"},subheader:"Preference",dense:!0,onClick:e.onClick},o.a.createElement(w.a,null,o.a.createElement(O.a,{primary:"Country"}),o.a.createElement(O.a,{primary:a})),o.a.createElement(j.a,null),o.a.createElement(w.a,null,o.a.createElement(O.a,{primary:"Category"}),o.a.createElement(O.a,{primary:n})),o.a.createElement(j.a,null))}var S=a(85),C=a(172),x=a(168),M=a(167);a.d(t,"default",(function(){return D}));var D=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e)))._isMounted=!1;var r=f.a.get("setting");return a.state={list:[],modalOpen:!1,setting:r,error:!1},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getTopHeadlines()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getTopHeadlines",value:function(){var e=this;Object(S.b)().then((function(t){e._isMounted&&e.setState({list:t})})).catch((function(){e.setState({error:!0})}))}},{key:"toggleModal",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"save",value:function(){var e={},t=this.state.setting,a=t.category,n=t.country,r=f.a.get("setting");a===r.category&&n===r.country||(e.setting=r,e.list=[],this.getTopHeadlines()),this.toggleModal(),this.setState(e)}},{key:"render",value:function(){var e=this.state.setting,t=e.category,a=e.country;return o.a.createElement("div",null,o.a.createElement(N,{onClick:this.toggleModal.bind(this),setting:{category:t,country:a}}),this.state.error?o.a.createElement("div",null,"API is not available"):0===this.state.list.length?o.a.createElement(m.a,null):o.a.createElement(u.a,{list:this.state.list}),o.a.createElement(C.a,{open:this.state.modalOpen,onClose:this.toggleModal.bind(this)},o.a.createElement(M.a,{in:this.state.modalOpen},o.a.createElement("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:"80vw",maxWidth:"600px",backgroundColor:"white",padding:"10px"}},o.a.createElement(E,null),o.a.createElement("div",{style:{float:"right"}},o.a.createElement(x.a,{variant:"contained",className:"m-r",onClick:this.toggleModal.bind(this)},"Cancel"),o.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.save.bind(this)},"Save"))))))}}]),t}(o.a.Component)},73:function(e,t,a){"use strict";var n=a(75),r=a(76),i=new(function(){function e(t){Object(n.a)(this,e),this.initialStore=t}return Object(r.a)(e,[{key:"save",value:function(e){var t=e.key,a=e.value,n=e.expired;if(!a||"object"!==typeof a)throw new Error("value must be an object");var r=JSON.stringify({value:a,expired:n});localStorage.setItem(t,r)}},{key:"get",value:function(e){var t=localStorage.getItem(e);if(!t)return this.initialStore[e]||null;var a,n=JSON.parse(t);return(a=n.expired)&&Date.now()>new Date(a).getTime()?this.initialStore[e]||null:n.value}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}]),e}())({setting:{country:"tw",category:"news"},params:{q:"Google"}});t.a=i},78:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),i=a(79),s=a.n(i);function l(e){var t=e.title,a=e.link,i=e.author,l=e.published_date,c=e.summary,o=[e.rights];i&&o.push(i);var u=Object(n.useMemo)((function(){return l?new Date(l).toLocaleString():null}),[l]);return r.a.createElement("div",{className:s.a.item,onClick:function(){window.open(a,"_blank")}},e.image?r.a.createElement("div",{className:s.a.image,style:{backgroundImage:"url(".concat(e.image,")")}}):null,r.a.createElement("div",{className:s.a.content},r.a.createElement("div",{className:s.a.title},t),r.a.createElement("div",{className:s.a.info},r.a.createElement("span",null,o.join("/")),r.a.createElement("span",null,u)),r.a.createElement("div",{className:s.a.description},c)))}function c(e){var t=e.list.map((function(e,t){return r.a.createElement(l,Object.assign({},e,{key:t}))}));return r.a.createElement("div",null,t)}},79:function(e,t,a){e.exports={item:"news_item__oCk2E",content:"news_content__3RzUW",title:"news_title__1sZ27",info:"news_info__3K7s_",description:"news_description__3Vo79",image:"news_image__IwsD-"}},85:function(e,t,a){"use strict";var n=a(80),r=a(73),i=a(97),s=a.n(i),l=a(26).a.api,c=l.origin,o=l.token,u=s.a.create({baseURL:c,timeout:3e3,headers:{"x-rapidapi-key":o,"x-rapidapi-host":"newscatcher.p.rapidapi.com"}});u.interceptors.response.use((function(e){return e.data&&"ok"===e.data.status?e.data:Promise.reject(e)})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return g}));function m(){var e,t=r.a.get("setting"),a=t.country,n=t.category,i=r.a.get("headlines");return i?Promise.resolve(i):(e={lang:a,topic:n},u.get("/latest_headlines",{params:e})).then((function(e){var t,a=e.articles;return r.a.save({key:"headlines",value:a,expired:(t=18e5,new Date(Date.now()+t))}),a}))}function g(e){var t,a,i=r.a.get("params"),s=r.a.get("setting").country,l=Object(n.a)({},e,{lang:s});if(t=i,a=l,!Object.keys(Object(n.a)({},t,{},a)).some((function(e){return t[e]!==a[e]}))){var c=r.a.get("everything");if(c)return Promise.resolve(c)}return function(e){return u.get("/search",{params:e})}(l).then((function(e){var t=e.articles;return r.a.save({key:"everything",value:t}),r.a.save({key:"params",value:l}),t}))}}}]);
//# sourceMappingURL=5.d1432a05.chunk.js.map