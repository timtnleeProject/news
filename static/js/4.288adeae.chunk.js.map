{"version":3,"sources":["components/NewsList/news.module.css","components/Loading/loading.module.css","components/NewsList/index.js","components/Loading/index.js","helper/store.js","helper/api.js","routes/Home/index.js"],"names":["module","exports","News","props","className","styles","item","onClick","window","open","url","image","src","alt","title","content","description","NewsList","news","list","map","urlToImage","key","Loading","loading","Store","value","expired","Error","str","JSON","stringify","localStorage","setItem","date","getItem","parsed","parse","Date","now","getTime","removeItem","CONFIG","api","origin","token","instance","axios","create","baseURL","timeout","headers","interceptors","response","use","data","status","store","Home","state","country","localHeadlines","get","Promise","resolve","params","then","res","milisec","headlines","articles","save","getTopHeadlines","setState","this","length","React","Component"],"mappings":"8FACAA,EAAOC,QAAU,CAAC,KAAO,mBAAmB,KAAO,mBAAmB,QAAU,sBAAsB,MAAQ,oBAAoB,YAAc,0BAA0B,MAAQ,sB,mBCAlLD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,MAAQ,yB,oHCE7D,SAASC,EAAMC,GAIb,OACE,yBACEC,UAAWC,IAAOC,KAClBC,QANa,WACfC,OAAOC,KAAKN,EAAMO,IAAK,YAOnBP,EAAMQ,MAEJ,yBAAKP,UAAWC,IAAOM,OACrB,yBAAKC,IAAKT,EAAMQ,MAAOE,IAAKV,EAAMW,SAGpC,KAEJ,yBAAKV,UAAWC,IAAOU,SACrB,yBAAKX,UAAWC,IAAOS,OAAQX,EAAMW,OACrC,yBAAKV,UAAWC,IAAOW,aAAcb,EAAMa,eAMpC,SAASC,EAAUd,GAChC,IAAMe,EAAOf,EAAMgB,KAAKC,KAAI,SAAAd,GAAI,OAC9B,kBAACJ,EAAD,CACEY,MAAOR,EAAKQ,MACZE,YAAaV,EAAKU,YAClBN,IAAKJ,EAAKI,IACVC,MAAOL,EAAKe,WACZC,IAAKhB,EAAKI,SAGd,OACE,yBAAKN,UAAWC,IAAOc,MACpBD,G,qBCrCQ,SAASK,IACtB,OACE,yBAAKnB,UAAWC,IAAOmB,SAAvB,sBCLJ,IAKaC,EAAb,gGACkC,IAAxBH,EAAuB,EAAvBA,IAAKI,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QAClB,IAAKD,GAA0B,kBAAVA,EAAoB,MAAM,IAAIE,MAAM,2BACzD,IAAMC,EAAMC,KAAKC,UAAU,CACzBL,QACAC,YAEFK,aAAaC,QAAQX,EAAKO,KAP9B,0BASOP,GACH,IAfeY,EAeTL,EAAMG,aAAaG,QAAQb,GACjC,GAAIO,EAAK,CACP,IAAMO,EAASN,KAAKO,MAAMR,GAC1B,OAlBaK,EAkBIE,EAAOT,UAhBrBW,KAAKC,MAAQ,IAAID,KAAKJ,GAAMM,UAgBI,KAAOJ,EAAOV,MAE9C,OAAOG,IAfhB,6BAiBUP,GACNU,aAAaS,WAAWnB,OAlB5B,K,yBCF0BoB,EAAOC,IAAzBC,E,EAAAA,OAAQC,E,EAAAA,MAEVC,EAAWC,IAAMC,OAAO,CAC5BC,QAASL,EACTM,QAAS,IACTC,QAAS,CACP,YAAaN,KAGjBC,EAASM,aAAaC,SAASC,KAAI,SAAAD,GACjC,OAAIA,EAASE,MAAiC,OAAzBF,EAASE,KAAKC,OAAwBH,EAASE,KACxDF,KAEd,IAAMI,EAAQ,IAAIhC,E,4CCXGiC,E,YACnB,WAAavD,GAAQ,IAAD,8BAClB,4CAAMA,KACDwD,MAAQ,CACXxC,KAAM,IAHU,E,iFAME,IAAD,QDchB,YAA+C,IAAD,IAAlByC,eAAkB,MAAR,KAAQ,EAC7CC,EAAiBJ,EAAMK,IAAI,aACjC,OAAID,EAAuBE,QAAQC,QAAQH,GACpCf,EAASgB,IAAI,iBAAkB,CACpCG,OAAQ,CACNL,aAEDM,MAAK,SAAAC,GACN,IAhBeC,EAgBTC,EAAYF,EAAIG,SAMtB,OALAb,EAAMc,KAAK,CACTjD,IAAK,YACLI,MAAO2C,EACP1C,SApBayC,EADJ,KAEN,IAAI9B,KAAKA,KAAKC,MAAQ6B,MAqBpBC,MC3BPG,CAAgB,CAAEZ,QAAS,OACxBM,MAAK,SAAAhD,GACJ,EAAKuD,SAAS,CACZtD,KAAMD,S,+BAKZ,OACE,6BAE+B,IAA3BwD,KAAKf,MAAMxC,KAAKwD,OACZ,kBAACpD,EAAD,MACA,kBAACN,EAAD,CAAUE,KAAMuD,KAAKf,MAAMxC,Y,GArBPyD,IAAMC","file":"static/js/4.288adeae.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"news_list__3aSRD\",\"item\":\"news_item__2akXV\",\"content\":\"news_content__3kxe-\",\"title\":\"news_title__3WJqZ\",\"description\":\"news_description__2LbzD\",\"image\":\"news_image__8z6Aw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"loading_loading__3nYZo\",\"blink\":\"loading_blink__1YMCk\"};","import React from 'react';\nimport styles from './news.module.css'\n\nfunction News (props) {\n  const openLink = () => {\n    window.open(props.url, '_blank')\n  }\n  return (\n    <div\n      className={styles.item}\n      onClick={openLink}\n    >\n      { props.image\n        ? (\n          <div className={styles.image}>\n            <img src={props.image} alt={props.title}/>\n          </div>\n        )\n        : null\n      }\n      <div className={styles.content}>\n        <div className={styles.title}>{props.title}</div>\n        <div className={styles.description}>{props.description}</div>\n      </div>\n    </div>\n  )\n}\n\nexport default function NewsList (props) {\n  const news = props.list.map(item => (\n    <News\n      title={item.title}\n      description={item.description}\n      url={item.url}\n      image={item.urlToImage}\n      key={item.url}\n    />\n  ))\n  return (\n    <div className={styles.list}>\n      {news}\n    </div>\n  )\n}","import React from 'react';\nimport styles from './loading.module.css'\n\nexport default function Loading () {\n  return (\n    <div className={styles.loading}>加載中</div>\n  )\n}\n","const isExpired = (date) => {\n  if (!date) return false\n  return Date.now() > new Date(date).getTime()\n}\n\nexport class Store {\n  save ({ key, value, expired }) {\n    if (!value || typeof value !== 'object') throw new Error('value must be an object')\n    const str = JSON.stringify({\n      value,\n      expired\n    })\n    localStorage.setItem(key, str)\n  }\n  get (key) {\n    const str = localStorage.getItem(key)\n    if (str) {\n      const parsed = JSON.parse(str)\n      return isExpired(parsed.expired) ? null : parsed.value\n    }\n    else return str\n  }\n  remove (key) {\n    localStorage.removeItem(key)\n  }\n}\n","import { Store } from './store';\nimport axios from 'axios'\nimport CONFIG from '../config'\nconst { origin, token } = CONFIG.api\n\nconst instance = axios.create({\n  baseURL: origin,\n  timeout: 3000,\n  headers: {\n    'X-Api-Key': token\n  }\n})\ninstance.interceptors.response.use(response => {\n  if (response.data && response.data.status === 'ok') return response.data\n  else return response\n})\nconst store = new Store()\nconst anHour = 60 * 60 * 1000\nconst dateAfter = (milisec) => {\n  return new Date(Date.now() + milisec)\n}\n\nexport function resetTopHeadlines () {\n  store.remove('headlines')\n}\n\nexport function getTopHeadlines ({ country = 'us' }) {\n  const localHeadlines = store.get('headlines')\n  if (localHeadlines) return Promise.resolve(localHeadlines)\n  return instance.get('/top-headlines', {\n    params: {\n      country\n    }\n  }).then(res => {\n    const headlines = res.articles\n    store.save({\n      key: 'headlines',\n      value: headlines,\n      expired: dateAfter(anHour)\n    })\n    return headlines\n  })\n}","import React from 'react'\nimport NewsList from '../../components/NewsList/index'\nimport Loading from '../../components/Loading/index'\nimport { getTopHeadlines } from '../../helper/api'\n\nexport default class Home extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      list: []\n    }\n  }\n  componentDidMount () {\n    getTopHeadlines({ country: 'us' })\n      .then(news => {\n        this.setState({\n          list: news\n        })\n      })\n  }\n  render () {\n    return (\n      <div>\n        {\n          this.state.list.length === 0\n            ? <Loading/>\n            : <NewsList list={this.state.list}/>\n        }\n      </div>\n    )\n  }\n}"],"sourceRoot":""}